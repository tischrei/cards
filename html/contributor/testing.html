
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Testing &#8212; otcextensions 0.24.3.dev2 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/basic.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Creating a New Resource" href="create/resource.html" />
    <link rel="prev" title="OpenStack SDK Developer Coding Standards" href="coding.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.min.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/pygments.css" rel="stylesheet">

<!-- Telekom Scale -->
<link href="https://unpkg.com/@telekom/scale-components@3.0.0-beta.32/dist/scale-components/scale-components.css" rel="stylesheet">

<!-- Otcdocstheme CSS -->
<link href="../_static/css/otcdocstheme.css" rel="stylesheet">



<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


  </head><body>
  
<!-- SOURCE_FILE: contributor/testing.rst -->


<scale-app-shell
  id="app-shell"
  claim-lang="en"
  logo-title="PAGENAME"
  logo-href="/"
>



<script>
  const app_shell = document.getElementById(
  'app-shell');
  app_shell.mainNavigation = [
    {
      "name": "Software",
      "id": "Software",
      "children": [
        {
          "name": "Automation",
          "id": "Automation",
          "children": [
            {
              "name": "Terraform OTC Driver",
              "id": "Terraform OTC Driver",
              "href": "https://docs.otc-service.com/terraform-provider-opentelekomcloud"
            },
                      {
              "name": "Ansible Collection Cloud",
              "id": "Ansible Collection Cloud",
              "href": "https://docs.otc-service.com/ansible-collection-cloud"
            },
          ]
        },
        {
          "name": "Client Tools",
          "id": "Client Tools",
          "children": [
            {
              "name": "OTC Extensions",
              "id": "OTC Extensions",
              "href": "https://docs.otc-service.com/python-otcextensions"
            }
          ]
        }
      ]
    },
    {
      "name": "Release Notes",
      "id": "Release Notes",
      "children": [
        {
          "name": "Automation",
          "id": "Automation",
          "children": [
            {
              "name": "Terraform OTC Driver",
              "id": "Terraform OTC Driver",
              "href": "https://docs.otc-service.com/releasenotes/terraform-provider-opentelekomcloud"
            }
          ]
        },
        {
          "name": "Client Tools",
          "id": "Client Tools",
          "children": [
            {
              "name": "OTC Extensions",
              "id": "OTC Extensions",
              "href": "https://docs.otc-service.com/releasenotes/python-otcextensions"
            }
          ]
        }
      ]
    }
  ];
</script>
  
      <div class="container docs-book-wrapper">
        <div class="row">
          <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
  <div class="row docs-title">
  <div class="col-lg-8">
      <h1>Testing</h1>
    
  </div>
  <div class="docs-actions">
    
    <a href="coding.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: OpenStack SDK Developer Coding Standards"></i></a>
    
    
    <a href="create/resource.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Creating a New Resource"></i></a>
    
  </div>
</div>
            <div class="row">
              <div class="col-lg-12">
                <div class="docs-body" role="main">
  
  <section id="testing">
<h1>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h1>
<p>The tests are run with <a class="reference external" href="https://tox.readthedocs.org/en/latest/">tox</a> and
configured in <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>. The test results are tracked by
<a class="reference external" href="https://testrepository.readthedocs.org/en/latest/">testr</a> and configured
in <code class="docutils literal notranslate"><span class="pre">.testr.conf</span></code>.</p>
<section id="unit-tests">
<h2>Unit Tests<a class="headerlink" href="#unit-tests" title="Permalink to this headline">¶</a></h2>
<section id="run">
<h3>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h3>
<p>In order to run the entire unit test suite, simply run the <code class="docutils literal notranslate"><span class="pre">tox</span></code> command
inside of your source checkout. This will attempt to run every test command
listed inside of <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>, which includes Python 2.7, 3.5,
and a PEP 8 check. You should run the full test suite on all versions before
submitting changes for review in order to avoid unexpected failures in the
continuous integration system.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(sdk3)$ tox
...
py35: commands succeeded
py27: commands succeeded
pep8: commands succeeded
congratulations :)
</pre></div>
</div>
<p>During development, it may be more convenient to run a subset of the tests
to keep test time to a minimum. You can choose to run the tests only on one
version. A step further is to run only the tests you are working on.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(sdk3)$ tox -e py35                # Run run the tests on Python 3.5
(sdk3)$ tox -e py35 TestContainer  # Run only the TestContainer tests on 3.5
</pre></div>
</div>
</section>
</section>
<section id="functional-tests">
<h2>Functional Tests<a class="headerlink" href="#functional-tests" title="Permalink to this headline">¶</a></h2>
<p>The functional tests assume that you have a public or private OpenStack cloud
that you can run the tests against. The tests must be able to be run against
public clouds but first and foremost they must be run against OpenStack. In
practice, this means that the tests should initially be run against a stable
branch of <a class="reference external" href="https://docs.openstack.org/devstack/latest/">DevStack</a>.</p>
<section id="id1">
<h3>DevStack<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>There are many ways to run and configure DevStack. The link above will show
you how to run DevStack a number of ways. You’ll need to choose a method
you’re familiar with and can run in your environment. Wherever DevStack is
running, we need to make sure that openstacksdk contributors are
using the same configuration.</p>
<p>This is the <code class="docutils literal notranslate"><span class="pre">local.conf</span></code> file we use to configure DevStack.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[[local|localrc]]
# Configure passwords and the Swift Hash
MYSQL_PASSWORD=DEVSTACK_PASSWORD
RABBIT_PASSWORD=DEVSTACK_PASSWORD
SERVICE_TOKEN=DEVSTACK_PASSWORD
ADMIN_PASSWORD=DEVSTACK_PASSWORD
SERVICE_PASSWORD=DEVSTACK_PASSWORD
SWIFT_HASH=DEVSTACK_PASSWORD

# Configure the stable OpenStack branches used by DevStack
# For stable branches see
# http://git.openstack.org/cgit/openstack-dev/devstack/refs/
CINDER_BRANCH=stable/OPENSTACK_VERSION
CEILOMETER_BRANCH=stable/OPENSTACK_VERSION
GLANCE_BRANCH=stable/OPENSTACK_VERSION
HEAT_BRANCH=stable/OPENSTACK_VERSION
HORIZON_BRANCH=stable/OPENSTACK_VERSION
KEYSTONE_BRANCH=stable/OPENSTACK_VERSION
NEUTRON_BRANCH=stable/OPENSTACK_VERSION
NOVA_BRANCH=stable/OPENSTACK_VERSION
SWIFT_BRANCH=stable/OPENSTACK_VERSION
ZAQAR_BRANCH=stable/OPENSTACK_VERSION

# Enable Swift
enable_service s-proxy
enable_service s-object
enable_service s-container
enable_service s-account

# Disable Nova Network and enable Neutron
disable_service n-net
enable_service q-svc
enable_service q-agt
enable_service q-dhcp
enable_service q-l3
enable_service q-meta
enable_service q-metering

# Enable Zaqar
enable_plugin zaqar https://github.com/openstack/zaqar
enable_service zaqar-server

# Enable Heat
enable_service h-eng
enable_service h-api
enable_service h-api-cfn
enable_service h-api-cw

# Automatically download and register a VM image that Heat can launch
# For more information on Heat and DevStack see
# https://docs.openstack.org/heat/latest/getting_started/on_devstack.html
IMAGE_URL_SITE=&quot;http://download.fedoraproject.org&quot;
IMAGE_URL_PATH=&quot;/pub/fedora/linux/releases/25/CloudImages/x86_64/images/&quot;
IMAGE_URL_FILE=&quot;Fedora-Cloud-Base-25-1.3.x86_64.qcow2&quot;
IMAGE_URLS+=&quot;,&quot;$IMAGE_URL_SITE$IMAGE_URL_PATH$IMAGE_URL_FILE

# Logging
LOGDAYS=1
LOGFILE=/opt/stack/logs/stack.sh.log
LOGDIR=/opt/stack/logs
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">DEVSTACK_PASSWORD</span></code> with a password of your choice.</p>
<p>Replace <code class="docutils literal notranslate"><span class="pre">OPENSTACK_VERSION</span></code> with a <a class="reference external" href="http://git.openstack.org/cgit/openstack-dev/devstack/refs/">stable branch</a>
of OpenStack (without the <code class="docutils literal notranslate"><span class="pre">stable/</span></code> prefix on the branch name).</p>
</section>
<section id="os-client-config">
<h3>os-client-config<a class="headerlink" href="#os-client-config" title="Permalink to this headline">¶</a></h3>
<p>To connect the functional tests to an OpenStack cloud we use
<a class="reference external" href="http://git.openstack.org/cgit/openstack/os-client-config/tree/README.rst">os-client-config</a>.
To setup os-client-config create a <code class="docutils literal notranslate"><span class="pre">clouds.yaml</span></code> file in the root of your
source checkout.</p>
<p>This is an example of a minimal configuration for a <code class="docutils literal notranslate"><span class="pre">clouds.yaml</span></code> that
connects the functional tests to a DevStack instance. Note that one cloud
under <code class="docutils literal notranslate"><span class="pre">clouds</span></code> must be named <code class="docutils literal notranslate"><span class="pre">test_cloud</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">clouds</span><span class="p">:</span>
  <span class="nt">test_cloud</span><span class="p">:</span>
    <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">RegionOne</span>
    <span class="nt">auth</span><span class="p">:</span>
      <span class="nt">auth_url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://xxx.xxx.xxx.xxx:5000/v2.0/</span>
      <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">demo</span>
      <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">secrete</span>
      <span class="nt">project_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">demo</span>
    <span class="nt">example</span><span class="p">:</span>
      <span class="nt">image_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">fedora-20.x86_64</span>
      <span class="nt">flavor_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="nt">network_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">private</span>
  <span class="nt">rackspace</span><span class="p">:</span>
    <span class="nt">cloud</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rackspace</span>
    <span class="nt">auth</span><span class="p">:</span>
      <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">joe</span>
      <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">joes-password</span>
      <span class="nt">project_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">123123</span>
    <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">IAD</span>
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">xxx.xxx.xxx.xxx</span></code> with the IP address or FQDN of your DevStack
instance.</p>
<p>You can also create a <code class="docutils literal notranslate"><span class="pre">~/.config/openstack/clouds.yaml</span></code> file for your
DevStack cloud environment using the following commands. Replace
<code class="docutils literal notranslate"><span class="pre">DEVSTACK_SOURCE</span></code> with your DevStack source checkout.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(sdk3)$ source DEVSTACK_SOURCE/accrc/admin/admin
(sdk3)$ ./create_yaml.sh
</pre></div>
</div>
</section>
<section id="id3">
<h3>Run<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Functional tests are run against both Python 2 and 3. In order to run the
entire functional test suite, run the <code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">functional</span></code> and
<code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">functional3</span></code> command inside of your source checkout. This will
attempt to run every test command under <code class="docutils literal notranslate"><span class="pre">/openstack/tests/functional/</span></code>
in the source tree. You should run the full functional test suite before
submitting changes for review in order to avoid unexpected failures in
the continuous integration system.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(sdk3)$ tox -e functional
...
functional: commands succeeded
congratulations :)
(sdk3)$ tox -e functional3
...
functional3: commands succeeded
congratulations :)
</pre></div>
</div>
</section>
</section>
<section id="examples-tests">
<h2>Examples Tests<a class="headerlink" href="#examples-tests" title="Permalink to this headline">¶</a></h2>
<p>Similar to the functional tests, the examples tests assume that you have a
public or private OpenStack cloud that you can run the tests against. In
practice, this means that the tests should initially be run against a stable
branch of <a class="reference external" href="https://docs.openstack.org/devstack/latest/">DevStack</a>.
And like the functional tests, the examples tests connect to an OpenStack cloud
using <a class="reference external" href="http://git.openstack.org/cgit/openstack/os-client-config/tree/README.rst">os-client-config</a>.
See the functional tests instructions for information on setting up DevStack
and os-client-config.</p>
<section id="id6">
<h3>Run<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>In order to run the entire examples test suite, simply run the
<code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">examples</span></code> command inside of your source checkout. This will
attempt to run every test command under <code class="docutils literal notranslate"><span class="pre">/openstack/tests/examples/</span></code>
in the source tree.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(sdk3)$ tox -e examples
...
examples: commands succeeded
congratulations :)
</pre></div>
</div>
</section>
</section>
</section>


                </div>
              </div>
            </div>
            <div class="docs-actions">
            
              <a href="coding.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: OpenStack SDK Developer Coding Standards"></i></a>
            
            
              <a href="create/resource.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Creating a New Resource"></i></a>
            
            </div>
            <div class="row docs-byline bottom">
              <div class="docs-updated">updated: 2021-12-08 13:15</div>
            </div>
          </div>
  <div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>otcextensions 0.24.3.dev2</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/configuration.html">2. Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">3. OpenStack Client (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sdk/index.html">4. Using the OpenStack SDK</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">5. Contributing to the OTC Extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#setting-up-an-development-environment">Setting up an Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#project-layout">Project Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#coding-standards">Coding Standards</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#example-sdk-service-and-resource-implementation">Example SDK Service and Resource Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#add-release-notes-to-your-pull-request">Add Release Notes to your Pull Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#contacting-the-otc-extensions-developers">Contacting the OTC Extensions Developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../coverage.html">6. Service Coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/index.html">7. Appendices</a></li>
</ul>

    </div>

  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="local-table-of-contents">
      <h4 class="docs-sidebar-section-title">Page Contents</h4>
      <ul>
<li><a class="reference internal" href="#">Testing</a><ul>
<li><a class="reference internal" href="#unit-tests">Unit Tests</a><ul>
<li><a class="reference internal" href="#run">Run</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functional-tests">Functional Tests</a><ul>
<li><a class="reference internal" href="#id1">DevStack</a></li>
<li><a class="reference internal" href="#os-client-config">os-client-config</a></li>
<li><a class="reference internal" href="#id3">Run</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples-tests">Examples Tests</a><ul>
<li><a class="reference internal" href="#id6">Run</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
  </div>
  </div>
</div>
        </div>
      </div>
  </scale-app-shell>
<scale-app-footer id="footer-shell" variant="standard" claim-lang="en">
</scale-app-footer>
<script>
  const footer_shell = document.getElementById("footer-shell");
  footer_shell.footerNavigation = [{"name":"Contact","id":"Contact","href":"https://cloud.telekom.de/en/contact/"},{"name":"Legal notice","id":"Legal notice","href":"https://cloud.telekom.de/en/imprint-adress"},{"name":"Data privacy","id":"Data privacy","href":"https://open-telekom-cloud.com/en/data-protection","icon":"alert-imprint-dataprivacy"}]</script>
  <!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-3.2.1.min.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.min.js"></script>

<!-- Telekom Scale -->
<script type="module" src="https://unpkg.com/@telekom/scale-components@3.0.0-beta.32/dist/scale-components/scale-components.esm.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- standard sphinx include libraries, which allow search highlighting -->
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript" src="../_static/searchtools.js"></script>

<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.24.3.dev2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
</script>


<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */
</script>
  
  </body>
</html>